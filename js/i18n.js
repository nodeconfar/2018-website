const translations = {
  en: {
    menuSection: {
      home: 'home',
      about: 'about',
      speakers: 'speakers',
      schedule: 'schedule',
      sponsors: 'sponsors',
      conduct: 'code of conduct',
      viewspeak: 'view all speakers',
      viewschedule: 'view schedule',
    },
    heroSection: {
      map: 'see map',
      date: 'OCTOBER 18th-20th, 2018',
    },
    aboutSection: {
      title: 'about',
      description: {
        firstPart: `Argentina is among the first international Node.js conferences taking place in Latin American territory, and a not-for-profit community effort to push Node.js forward in Argentina and Latin America as a whole.`,
        secondPart: `This year’s conference will be a three–day event in sunny Buenos Aires, Argentina, held during October 18th, 19th & 20th. Both action-packed days will be comprised of internationally acclaimed, regional, and local speakers.`,
        thirdPart: `We are expecting Noders, JavaScripters, front-enders, and other programmers from all over the world.`,
      },
      previous: 'previous editions',
    },
    speakersSection: {
      title: 'speakers',
      speakers: {
        suz: {
          fullName: 'Suz Hinton',
          position: 'Cloud Developer Advocate en Microsoft',
          bio:
            'Suz is a Cloud Developer Advocate at Microsoft. Suz specializes in accessibility, hardware, JavaScript, and cloud computing. She likes dreaming up fun electronic projects in her spare time.',
        },
        dan: {
          fullName: 'Dan Shaw',
          position: 'Strategic Advisor',
          bio: `
            Dan Shaw, aka “dshaw”, has dedicated his career to growing the Node.js Ecosystem. He was instrumental in the formation of the Node.js Foundation where he served on the Board as Director. He is known as "The Godfather of Node.js” for his tireless efforts to build community and align the needs of developers and business leaders.
            He is a keynote speaker and speaks about Leadership, Node.js, JavaScript and Digital Transformation. He is recognizable as the “Voice of Node.js” as long-time host of the NodeUp podcast. He has created numerous events like EnterpriseJS, NodeDay, SFNode, SFNodeBots, and Nodebots Day to provide opportunities to share knowledge and learn.
            He created the first consulting company dedicated to Node.js called The Node Firm and then the first commercial entity to productize Node.js with NodeSource. Today, Dan Shaw works across the industry providing leadership as a Strategic Advisor to companies looking grow their presence and work effectively with Node.js.
            `,
        },
        franziska: {
          fullName: 'Franziska Hinkelman',
          position: 'Software engineer @ Google Cloud Platform',
          bio: `
            Franziska is a member of the Node.js Technical Steering Committee and an expert on ES6 performance. She has a Ph.D. in mathematics and is a software engineer at Google on the Cloud Platform team in New York. Previously, she was on the Chrome V8 team. When she's not working hard on making Node.js better on the Cloud Platform, she's probably out riding horses.
          `,
        },
        tara: {
          fullName: 'Tara Vancil',
          position: 'Co-creator of the Beaker Browser',
          bio: `
            Tara is the co-creator of the Beaker Browser, an experimental browser for exploring and building the peer-to-peer Web. She co-founded Blue Link Labs, the team of peer-to-peer enthusiasts behind the Beaker Browser and hashbase.io. She's dedicated to building the Web of tomorrow as a Web for all.
          `,
        },
      },
    },
    ticketsSection: {
      title: 'tickets',
      description: {
        firstPart: `we want to meet you!`,
        secondPart: `Full two-day access to Ciudad Cultural Konex on October 19th & 20th.`,
        thirdPart: `This ticket will also get you: goodie bag (including top quality stickers and a T-Shirt of your size), live translating (Spanish -> English, English -> Spanish), lunches for October 19th & 20th, breakfast for October 19th, 3 additional coffeebreaks between October 19th & 20th`,
      },
      tickets: {
        early: 'early birds',
        soldOut: 'Tickets are sold out!',
        thanks: 'Thanks to all of you for supporting the conference',
      },
    },
    formSection: {
      title: 'stay',
      subtitle: 'up to date',
    },
    sponsorSection: {
      title: 'they make this conference possible',
    },
  },
  es: {
    menuSection: {
      home: 'inicio',
      about: 'acerca de',     
      speakers: 'oradores',
      schedule: 'cronograma',
      sponsors: 'patrocinadores',
      conduct: 'código de conducta',
      viewspeak: 'ver a todos',
      viewschedule: 'ver cronograma',
    },
    heroSection: {
      map: 'ver mapa',
      date: 'OCTUBRE 18-20, 2018',
    },
    aboutSection: {
      title: 'acerca de',
      description: {
        firstPart: `Argentina se encuentra entre las primeras conferencias internacionales de Node.js que tienen lugar en territorio latinoamericano, y un esfuerzo comunitario sin fines de lucro para impulsar a Node.js en Argentina y Latinoamérica en su conjunto.`,
        secondPart: `La conferencia de este año será un evento de tres días en el soleado Buenos Aires, Argentina, celebrado durante los días 18, 19 y 20 de octubre. Ambas jornadas llenas de acción estarán compuestas por oradores internacionalmente aclamados, regionales y locales.`,
        thirdPart: `Estamos esperando Noders, JavaScripters, front-enders y otros programadores de todo el mundo.`,
      },
      previous: 'ediciones previas',
    },
    speakersSection: {
      title: 'oradores',
      speakers: {
        suz: {
          fullName: 'Suz Hinton',
          position: 'Cloud Developer Advocate en Microsoft',
          bio:
            'Suz is a Cloud Developer Advocate at Microsoft. Suz specializes in accessibility, hardware, JavaScript, and cloud computing. She likes dreaming up fun electronic projects in her spare time.',
        },
        dan: {
          fullName: 'Dan Shaw',
          position: 'Strategic Advisor',
          bio: `
            Dan Shaw, aka “dshaw”, has dedicated his career to growing the Node.js Ecosystem. He was instrumental in the formation of the Node.js Foundation where he served on the Board as Director. He is known as "The Godfather of Node.js” for his tireless efforts to build community and align the needs of developers and business leaders.
            He is a keynote speaker and speaks about Leadership, Node.js, JavaScript and Digital Transformation. He is recognizable as the “Voice of Node.js” as long-time host of the NodeUp podcast. He has created numerous events like EnterpriseJS, NodeDay, SFNode, SFNodeBots, and Nodebots Day to provide opportunities to share knowledge and learn.
            He created the first consulting company dedicated to Node.js called The Node Firm and then the first commercial entity to productize Node.js with NodeSource. Today, Dan Shaw works across the industry providing leadership as a Strategic Advisor to companies looking grow their presence and work effectively with Node.js.
            `,
        },
        franziska: {
          fullName: 'Franziska Hinkelman',
          position: 'Software engineer @ Google Cloud Platform',
          bio: `
            Franziska is a member of the Node.js Technical Steering Committee and an expert on ES6 performance. She has a Ph.D. in mathematics and is a software engineer at Google on the Cloud Platform team in New York. Previously, she was on the Chrome V8 team. When she's not working hard on making Node.js better on the Cloud Platform, she's probably out riding horses.
          `,
        },
        tara: {
          fullName: 'Tara Vancil',
          position: 'Co-creator of the Beaker Browser',
          bio: `
            Tara is the co-creator of the Beaker Browser, an experimental browser for exploring and building the peer-to-peer Web. She co-founded Blue Link Labs, the team of peer-to-peer enthusiasts behind the Beaker Browser and hashbase.io. She's dedicated to building the Web of tomorrow as a Web for all.
          `,
        },
      },
    },
    ticketsSection: {
      title: 'entradas',
      description: {
        firstPart: `¡queremos conocerte!`,
        secondPart: `Acceso total de dos días a Ciudad Cultural Konex el 19 y 20 de octubre.`,
        thirdPart: `Esta entrada también le dará: bolsa de regalos (incluyendo stickers de alta calidad y una camiseta de su tamaño), traducción en vivo (español -> inglés, inglés -> español), almuerzos del 19 y 20 de octubre, desayuno para el 19 de octubre, 3 coffee-breaks adicionales entre el 19 y 20 de octubre`,
      },
      tickets: {
        early: 'anticipadas',
        soldOut: '¡Las entradas están agotadas!',
        thanks: 'Gracias a todos por apoyar la conferencia',
      },
    },
    formSection: {
      title: 'mantenete',
      subtitle: 'informado',
    },
    sponsorSection: {
      title: 'hacen esta conferencia posible',
    },
  },
}

// Function that gets nested keys
const getValue = (keyString, translations) => {
  return keyString
    .replace(/\[([^\]]+)]/g, '.$1')
    .split('.')
    .reduce((translation, key) => translation[key], translations)
}

// Function that changes the language in the UI
const changeLanguage = (elements, language) => {
  elements.forEach(i18nElement => {
    const i18nKey = i18nElement.getAttribute('data-i18n')
    const translation = getValue(i18nKey, translations[language])

    // Debuggin purposes only. Could be removed any time or when all translations are completed
    if (!i18nKey) console.error(`You are needing a "data-i18n" attribute for the ${i18nElement} element`)
    if (!translation) console.error(`You are needing a translation for the ${i18nKey} key`)

    if (translation) i18nElement.textContent = translation
  })
}

// Function that sets default language
const setDefaultLanguage = elements => {
  // Returns [ 'en', 'es' ] so you can add any new language key to translations
  const supportedLanguages = Object.keys(translations)

  // Returns the user language
  const userLanguage = navigator.language

  // In case the language is not supported will default to english
  const defaultLanguage = supportedLanguages.find(language => userLanguage.includes(language)) || 'en'

  changeLanguage(elements, defaultLanguage)
}

const i18n = () => {
  const buttons = document.querySelectorAll('[data-lang]')
  const i18nElements = document.querySelectorAll('[data-i18n]')

  setDefaultLanguage(i18nElements)

  buttons.forEach(button => {
    button.addEventListener('click', event => {
      const language = event.target.getAttribute('data-lang')
      changeLanguage(i18nElements, language)
    })
  })
}

document.addEventListener('DOMContentLoaded', i18n)
